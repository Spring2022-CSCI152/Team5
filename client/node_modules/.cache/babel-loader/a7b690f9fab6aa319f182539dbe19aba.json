{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Transport = void 0;\n\nconst events_1 = require(\"events\");\n\nconst parser_v4 = require(\"engine.io-parser\");\n\nconst parser_v3 = require(\"./parser-v3/index\");\n\nconst debug_1 = require(\"debug\");\n\nconst debug = (0, debug_1.default)(\"engine:transport\");\n/**\r\n * Noop function.\r\n *\r\n * @api private\r\n */\n\nfunction noop() {}\n\nclass Transport extends events_1.EventEmitter {\n  /**\r\n   * Transport constructor.\r\n   *\r\n   * @param {http.IncomingMessage} request\r\n   * @api public\r\n   */\n  constructor(req) {\n    super();\n    this.readyState = \"open\";\n    this.discarded = false;\n    this.protocol = req._query.EIO === \"4\" ? 4 : 3; // 3rd revision by default\n\n    this.parser = this.protocol === 4 ? parser_v4 : parser_v3;\n  }\n\n  get readyState() {\n    return this._readyState;\n  }\n\n  set readyState(state) {\n    debug(\"readyState updated from %s to %s (%s)\", this._readyState, state, this.name);\n    this._readyState = state;\n  }\n  /**\r\n   * Flags the transport as discarded.\r\n   *\r\n   * @api private\r\n   */\n\n\n  discard() {\n    this.discarded = true;\n  }\n  /**\r\n   * Called with an incoming HTTP request.\r\n   *\r\n   * @param {http.IncomingMessage} request\r\n   * @api protected\r\n   */\n\n\n  onRequest(req) {\n    debug(\"setting request\");\n    this.req = req;\n  }\n  /**\r\n   * Closes the transport.\r\n   *\r\n   * @api private\r\n   */\n\n\n  close(fn) {\n    if (\"closed\" === this.readyState || \"closing\" === this.readyState) return;\n    this.readyState = \"closing\";\n    this.doClose(fn || noop);\n  }\n  /**\r\n   * Called with a transport error.\r\n   *\r\n   * @param {String} message error\r\n   * @param {Object} error description\r\n   * @api protected\r\n   */\n\n\n  onError(msg, desc) {\n    if (this.listeners(\"error\").length) {\n      const err = new Error(msg); // @ts-ignore\n\n      err.type = \"TransportError\"; // @ts-ignore\n\n      err.description = desc;\n      this.emit(\"error\", err);\n    } else {\n      debug(\"ignored transport error %s (%s)\", msg, desc);\n    }\n  }\n  /**\r\n   * Called with parsed out a packets from the data stream.\r\n   *\r\n   * @param {Object} packet\r\n   * @api protected\r\n   */\n\n\n  onPacket(packet) {\n    this.emit(\"packet\", packet);\n  }\n  /**\r\n   * Called with the encoded packet data.\r\n   *\r\n   * @param {String} data\r\n   * @api protected\r\n   */\n\n\n  onData(data) {\n    this.onPacket(this.parser.decodePacket(data));\n  }\n  /**\r\n   * Called upon transport close.\r\n   *\r\n   * @api protected\r\n   */\n\n\n  onClose() {\n    this.readyState = \"closed\";\n    this.emit(\"close\");\n  }\n\n}\n\nexports.Transport = Transport;","map":{"version":3,"sources":["C:/Users/gabe/Desktop/Pomo/Team5/client/node_modules/engine.io/build/transport.js"],"names":["Object","defineProperty","exports","value","Transport","events_1","require","parser_v4","parser_v3","debug_1","debug","default","noop","EventEmitter","constructor","req","readyState","discarded","protocol","_query","EIO","parser","_readyState","state","name","discard","onRequest","close","fn","doClose","onError","msg","desc","listeners","length","err","Error","type","description","emit","onPacket","packet","onData","data","decodePacket","onClose"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Transport = void 0;\r\nconst events_1 = require(\"events\");\r\nconst parser_v4 = require(\"engine.io-parser\");\r\nconst parser_v3 = require(\"./parser-v3/index\");\r\nconst debug_1 = require(\"debug\");\r\nconst debug = (0, debug_1.default)(\"engine:transport\");\r\n/**\r\n * Noop function.\r\n *\r\n * @api private\r\n */\r\nfunction noop() { }\r\nclass Transport extends events_1.EventEmitter {\r\n    /**\r\n     * Transport constructor.\r\n     *\r\n     * @param {http.IncomingMessage} request\r\n     * @api public\r\n     */\r\n    constructor(req) {\r\n        super();\r\n        this.readyState = \"open\";\r\n        this.discarded = false;\r\n        this.protocol = req._query.EIO === \"4\" ? 4 : 3; // 3rd revision by default\r\n        this.parser = this.protocol === 4 ? parser_v4 : parser_v3;\r\n    }\r\n    get readyState() {\r\n        return this._readyState;\r\n    }\r\n    set readyState(state) {\r\n        debug(\"readyState updated from %s to %s (%s)\", this._readyState, state, this.name);\r\n        this._readyState = state;\r\n    }\r\n    /**\r\n     * Flags the transport as discarded.\r\n     *\r\n     * @api private\r\n     */\r\n    discard() {\r\n        this.discarded = true;\r\n    }\r\n    /**\r\n     * Called with an incoming HTTP request.\r\n     *\r\n     * @param {http.IncomingMessage} request\r\n     * @api protected\r\n     */\r\n    onRequest(req) {\r\n        debug(\"setting request\");\r\n        this.req = req;\r\n    }\r\n    /**\r\n     * Closes the transport.\r\n     *\r\n     * @api private\r\n     */\r\n    close(fn) {\r\n        if (\"closed\" === this.readyState || \"closing\" === this.readyState)\r\n            return;\r\n        this.readyState = \"closing\";\r\n        this.doClose(fn || noop);\r\n    }\r\n    /**\r\n     * Called with a transport error.\r\n     *\r\n     * @param {String} message error\r\n     * @param {Object} error description\r\n     * @api protected\r\n     */\r\n    onError(msg, desc) {\r\n        if (this.listeners(\"error\").length) {\r\n            const err = new Error(msg);\r\n            // @ts-ignore\r\n            err.type = \"TransportError\";\r\n            // @ts-ignore\r\n            err.description = desc;\r\n            this.emit(\"error\", err);\r\n        }\r\n        else {\r\n            debug(\"ignored transport error %s (%s)\", msg, desc);\r\n        }\r\n    }\r\n    /**\r\n     * Called with parsed out a packets from the data stream.\r\n     *\r\n     * @param {Object} packet\r\n     * @api protected\r\n     */\r\n    onPacket(packet) {\r\n        this.emit(\"packet\", packet);\r\n    }\r\n    /**\r\n     * Called with the encoded packet data.\r\n     *\r\n     * @param {String} data\r\n     * @api protected\r\n     */\r\n    onData(data) {\r\n        this.onPacket(this.parser.decodePacket(data));\r\n    }\r\n    /**\r\n     * Called upon transport close.\r\n     *\r\n     * @api protected\r\n     */\r\n    onClose() {\r\n        this.readyState = \"closed\";\r\n        this.emit(\"close\");\r\n    }\r\n}\r\nexports.Transport = Transport;\r\n"]},"metadata":{},"sourceType":"script"}