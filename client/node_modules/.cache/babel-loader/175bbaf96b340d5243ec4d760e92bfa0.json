{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Johnny Dean\\\\Desktop\\\\fsosubmission\\\\merge\\\\client\\\\src\\\\components\\\\TimerPage\\\\TimerPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport LinearProgress from '@mui/material/LinearProgress';\nimport Button from '@mui/material/Button';\nimport Box from '@mui/material/Box';\nimport Stack from '@mui/material/Stack';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport axios from 'axios';\nimport Timer from './TimerDisplay/Timer';\nimport CharacterDisplay from './TimerDisplay/CharacterDisplay';\nimport RoomDisplay from './TimerDisplay/RoomDisplay';\nimport QuestDisplay from './TimerDisplay/QuestDisplay';\nimport TimeMath from '../../services/TimeMath'; // Menu\n\nimport TimerAdjust from '../TimerPage/Menu/TimerAdjust';\nimport FriendsList from '../TimerPage/Menu/FriendsList';\nimport ItemShop from '../TimerPage/Menu/ItemShop';\n\nfunction TimerPage() {\n  const [pomodoro, setPomodoro] = useState(25);\n  const [shortBreak, setShortBreak] = useState(5);\n  const [longBreak, setLongBreak] = useState(20);\n  const [timerSeconds, setTimerSeconds] = useState(TimeMath.convMinSec(pomodoro));\n  const [timerMode, setTimerMode] = useState('Questing');\n  const [isRunning, setIsRunning] = useState(false);\n  const [pomosCompleted, setPomosCompleted] = useState(0);\n  const [activeTask, setActiveTask] = useState('');\n\n  const handleModeChange = () => {\n    if (timerMode === 'Questing' && pomosCompleted === 3) {\n      setTimerMode('Long Camp');\n      setPomosCompleted(pomosCompleted => pomosCompleted + 1);\n      setTimerSeconds(TimeMath.convMinSec(longBreak));\n    } else if (timerMode === 'Questing') {\n      setTimerMode('Short Camp');\n      setTimerSeconds(TimeMath.convMinSec(shortBreak));\n      setPomosCompleted(pomosCompleted => pomosCompleted + 1);\n    } else {\n      setTimerMode('Questing');\n      setTimerSeconds(TimeMath.convMinSec(pomodoro));\n    }\n  };\n\n  const timeoutID = 0;\n  useEffect(() => {\n    if (isRunning && timerSeconds > 0) {\n      const timeoutID = setTimeout(() => {\n        setTimerSeconds(timerSeconds => timerSeconds - 1);\n      }, 1000);\n    }\n\n    if (timerSeconds === 0) {\n      setIsRunning(false);\n      clearTimeout(timeoutID);\n      handleModeChange();\n    }\n\n    clearTimeout(timeoutID);\n  }, [isRunning, timerSeconds]);\n  return /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      justifyContent: 'center',\n      textAlign: 'center',\n      alignItems: 'baseline',\n      pt: 5,\n      pb: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(RoomDisplay, {\n    pomosCompleted: pomosCompleted,\n    multiplier: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      mb: 5,\n      minWidth: 400\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(LinearProgress, {\n    variant: \"determinate\",\n    value: TimeMath.normalise(Math.abs(timerSeconds - TimeMath.convMinSec(pomodoro)), pomodoro),\n    sx: {\n      height: 12,\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(Timer, {\n    timerMode: timerMode,\n    timer: TimeMath.formatSeconds(timerSeconds),\n    reward: pomosCompleted % 2 === 0 ? '`Gold`' : 'Exp',\n    activeTask: activeTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(ButtonGroup, {\n    variant: 'contained',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setIsRunning(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 23\n    }\n  }, \"START\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      setIsRunning(false);\n      clearTimeout(timeoutID);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 23\n    }\n  }, \"STOP\")), /*#__PURE__*/React.createElement(QuestDisplay, {\n    setActiveTask: setActiveTask,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      ml: 10,\n      width: '9%',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CharacterDisplay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Stack, {\n    direction: 'row',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(TimerAdjust, {\n    pomodoro: pomodoro,\n    setPomodoro: setPomodoro,\n    shortBreak: shortBreak,\n    setShortBreak: setShortBreak,\n    longBreak: longBreak,\n    setLongBreak: setLongBreak,\n    setTimerSeconds: setTimerSeconds,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(FriendsList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(ItemShop, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 27\n    }\n  }))));\n}\n\nexport default TimerPage;","map":{"version":3,"sources":["C:/Users/Johnny Dean/Desktop/fsosubmission/merge/client/src/components/TimerPage/TimerPage.js"],"names":["React","useState","useEffect","LinearProgress","Button","Box","Stack","ButtonGroup","axios","Timer","CharacterDisplay","RoomDisplay","QuestDisplay","TimeMath","TimerAdjust","FriendsList","ItemShop","TimerPage","pomodoro","setPomodoro","shortBreak","setShortBreak","longBreak","setLongBreak","timerSeconds","setTimerSeconds","convMinSec","timerMode","setTimerMode","isRunning","setIsRunning","pomosCompleted","setPomosCompleted","activeTask","setActiveTask","handleModeChange","timeoutID","setTimeout","clearTimeout","display","justifyContent","textAlign","alignItems","pt","pb","mb","minWidth","normalise","Math","abs","height","width","formatSeconds","ml","flexDirection"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport LinearProgress from '@mui/material/LinearProgress';\r\nimport Button from '@mui/material/Button';\r\nimport Box from '@mui/material/Box';\r\nimport Stack from '@mui/material/Stack';\r\nimport ButtonGroup from '@mui/material/ButtonGroup';\r\nimport axios from 'axios';\r\n\r\nimport Timer from './TimerDisplay/Timer'\r\nimport CharacterDisplay from './TimerDisplay/CharacterDisplay'\r\nimport RoomDisplay from './TimerDisplay/RoomDisplay'\r\nimport QuestDisplay from './TimerDisplay/QuestDisplay'\r\nimport TimeMath from '../../services/TimeMath'\r\n// Menu\r\nimport TimerAdjust from '../TimerPage/Menu/TimerAdjust'\r\nimport FriendsList from '../TimerPage/Menu/FriendsList'\r\nimport ItemShop from '../TimerPage/Menu/ItemShop'\r\n\r\nfunction TimerPage() {\r\n  const [ pomodoro , setPomodoro ] = useState(25)\r\n  const [ shortBreak , setShortBreak ] = useState(5)\r\n  const [ longBreak , setLongBreak ] = useState(20)\r\n  const [ timerSeconds , setTimerSeconds ] = useState(TimeMath.convMinSec(pomodoro))\r\n  const [ timerMode , setTimerMode ] = useState('Questing')\r\n  const [ isRunning, setIsRunning ] = useState(false)\r\n  const [ pomosCompleted, setPomosCompleted ] = useState(0);\r\n  const [ activeTask, setActiveTask ] = useState('')\r\n\r\n    const handleModeChange = () => {\r\n      if (timerMode === 'Questing' && pomosCompleted === 3){\r\n          setTimerMode('Long Camp');\r\n          setPomosCompleted(pomosCompleted => pomosCompleted + 1);\r\n          setTimerSeconds(TimeMath.convMinSec(longBreak));\r\n      }\r\n      else if (timerMode === 'Questing'){\r\n          setTimerMode('Short Camp');\r\n          setTimerSeconds(TimeMath.convMinSec(shortBreak));\r\n          setPomosCompleted(pomosCompleted => pomosCompleted + 1);\r\n      } else{\r\n          setTimerMode('Questing')\r\n          setTimerSeconds(TimeMath.convMinSec(pomodoro));\r\n      }\r\n    }\r\n\r\n    const timeoutID = 0;\r\n\r\n    useEffect(() => {\r\n        if(isRunning && timerSeconds > 0) {\r\n            const timeoutID = setTimeout(() => {\r\n                setTimerSeconds(timerSeconds => timerSeconds - 1)\r\n            }, 1000)\r\n        }\r\n        if (timerSeconds === 0){\r\n            setIsRunning(false);\r\n            clearTimeout(timeoutID);\r\n            handleModeChange()\r\n        }\r\n        clearTimeout(timeoutID);\r\n    }, [isRunning, timerSeconds]);\r\n\r\n  return (\r\n          <Box sx={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              textAlign: 'center',\r\n              alignItems: 'baseline',\r\n              pt: 5, pb: 5,\r\n          }}>\r\n\r\n              <RoomDisplay pomosCompleted={pomosCompleted} multiplier={1} />\r\n\r\n              <Box>\r\n                  <Box sx={{mb: 5, minWidth: 400}}>\r\n                      <LinearProgress variant='determinate' value={TimeMath.normalise(Math.abs(timerSeconds - TimeMath.convMinSec(pomodoro)),pomodoro)} sx={{height: 12, width: '100%'}}/>\r\n                      <Timer\r\n                          timerMode={timerMode}\r\n                          timer={TimeMath.formatSeconds(timerSeconds)}\r\n                          reward={pomosCompleted % 2 === 0 ? '`Gold`' : 'Exp'}\r\n                          activeTask = {activeTask}\r\n                      />\r\n                  </Box>\r\n                  <ButtonGroup variant={'contained'}>\r\n                      <Button onClick={() => setIsRunning(true)}>START</Button>\r\n                      <Button onClick={() => {\r\n                          setIsRunning(false)\r\n                          clearTimeout(timeoutID)\r\n                      }}>STOP</Button>\r\n                  </ButtonGroup>\r\n                <QuestDisplay setActiveTask={setActiveTask} />\r\n              </Box>\r\n\r\n              <Box sx={{ml: 10, width: '9%', display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\r\n                  <CharacterDisplay />\r\n                  <Stack direction={'row'}>\r\n                          <TimerAdjust pomodoro={pomodoro} setPomodoro={setPomodoro} shortBreak={shortBreak} setShortBreak={setShortBreak} longBreak={longBreak} setLongBreak={setLongBreak} setTimerSeconds={setTimerSeconds} />\r\n                          <FriendsList/>\r\n                          <ItemShop/>\r\n                  </Stack>\r\n              </Box>\r\n          </Box>\r\n  );\r\n}\r\n\r\nexport default TimerPage;\r\n"]},"metadata":{},"sourceType":"module"}